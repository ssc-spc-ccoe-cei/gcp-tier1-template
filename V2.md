# monorepo v2

## Requirements

1. Must be able to contain wet files for gitops (config controller, kubernetes and terraform [weave controller](https://www.weave.works/blog/terraform-controller-weave-gitops) (optional) )
2. Must allow tags per solution
3. Must allow simple management of automatically included reviewers
4. Must remain simple to all teams
5. Must have a distinct tag for Gatekeeper policies
6. Security Controls are asking for Privately managed source repo for code
7. Must meet all tagging scenarios
8. maintain a small footprint of repositories

## Option #1

- R1 : create a new layer under `tierx/source-base/<opa|kcc|k8s>`
- R2 : create tag on `tierx/deploy/<env>/<opa|kcc|k8s>`. That solution is tying a tag to the folder that is observed by configsync.
- R3 : maintain automatically included reviewer path filter almost identical
- R4 : maybe the new layer could use more characters to be more human readable
- R5 : covered by R2
- R6 : create a tool that would be able to publish packages to 2 upstream...but, I'm not sure that is the best idea
- R7 : add VERSION.txt and CHANGELOG.md to `tierx/source-customization/<env>/<opa|kcc|k8s>` and restart using the script below:
    - https://github.com/ssc-spc-ccoe-cei/gcp-tools/blob/main/scripts/cicd/version-tagging.sh
    - maybe we could modify the hydrate script to require an `environment` parameter.


TODO: determine a functionnal root-sync/repo-sync naming convention
